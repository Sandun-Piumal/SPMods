<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="Smart AI - ‡∂î‡∂∂‡∑ö ‡∂∂‡∑î‡∂Ø‡∑ä‡∂∞‡∑í‡∂∏‡∂≠‡∑ä ‡∑É‡∑Ñ‡∑è‡∂∫‡∂ö">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Smart AI">
    
    <title>Smart AI - Install</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon.svg">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #fff;
        }

        .container {
            max-width: 500px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .app-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto 24px;
            background: #fff;
            border-radius: 28px;
            padding: 22px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .icon-svg {
            width: 100%;
            height: 100%;
        }

        h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #fff 0%, #e0e7ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 24px;
        }

        .platform-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 13px;
            margin-bottom: 24px;
            font-weight: 600;
        }

        .features {
            text-align: left;
            margin: 24px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
        }

        .feature {
            display: flex;
            align-items: center;
            margin-bottom: 14px;
            font-size: 15px;
        }

        .feature:last-child {
            margin-bottom: 0;
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
        }

        button {
            width: 100%;
            padding: 16px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        button:active {
            transform: scale(0.98);
        }

        .install-btn {
            background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
            color: #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-size: 18px;
            padding: 18px 24px;
        }

        .install-btn:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .install-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .open-btn {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-size: 15px;
        }

        .open-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .ios-btn {
            background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);
            color: #fff;
        }

        .hidden {
            display: none !important;
        }

        .status {
            margin-top: 16px;
            padding: 14px 18px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .success { 
            background: rgba(16, 185, 129, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.5);
        }
        
        .info { 
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(59, 130, 246, 0.5);
        }
        
        .warning { 
            background: rgba(245, 158, 11, 0.3);
            border: 1px solid rgba(245, 158, 11, 0.5);
        }

        .error {
            background: rgba(239, 68, 68, 0.3);
            border: 1px solid rgba(239, 68, 68, 0.5);
        }

        .ios-instructions {
            text-align: left;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            font-size: 14px;
            line-height: 1.7;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: expandDown 0.3s ease;
        }

        @keyframes expandDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 500px; }
        }

        .ios-instructions ol {
            margin: 12px 0;
            padding-left: 20px;
        }

        .ios-instructions li {
            margin: 10px 0;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 480px) {
            .container { padding: 32px 24px; }
            h1 { font-size: 28px; }
            .app-icon { width: 100px; height: 100px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-icon">
            <svg class="icon-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="brainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#667eea"/>
                        <stop offset="100%" style="stop-color:#764ba2"/>
                    </linearGradient>
                </defs>
                <path d="M50 20 C30 20, 20 30, 20 45 C20 50, 22 55, 25 58 C23 60, 22 63, 22 66 C22 72, 27 77, 33 77 C35 77, 37 76, 39 75 C42 80, 46 83, 50 83 C54 83, 58 80, 61 75 C63 76, 65 77, 67 77 C73 77, 78 72, 78 66 C78 63, 77 60, 75 58 C78 55, 80 50, 80 45 C80 30, 70 20, 50 20 Z" 
                      fill="url(#brainGrad)" stroke="#5a67d8" stroke-width="2"/>
                <circle cx="35" cy="40" r="3" fill="#fff" opacity="0.9">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="50" cy="35" r="3" fill="#fff" opacity="0.9">
                    <animate attributeName="opacity" values="1;0.6;1" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="65" cy="40" r="3" fill="#fff" opacity="0.9">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="40" cy="55" r="2.5" fill="#fff" opacity="0.8"/>
                <circle cx="60" cy="55" r="2.5" fill="#fff" opacity="0.8"/>
                <line x1="35" y1="40" x2="50" y2="35" stroke="#fff" stroke-width="1.5" opacity="0.4"/>
                <line x1="50" y1="35" x2="65" y2="40" stroke="#fff" stroke-width="1.5" opacity="0.4"/>
                <line x1="35" y1="40" x2="40" y2="55" stroke="#fff" stroke-width="1.5" opacity="0.4"/>
                <line x1="65" y1="40" x2="60" y2="55" stroke="#fff" stroke-width="1.5" opacity="0.4"/>
            </svg>
        </div>

        <h1>Smart AI</h1>
        <p class="subtitle">‡∂î‡∂∂‡∑ö ‡∂∂‡∑î‡∂Ø‡∑ä‡∂∞‡∑í‡∂∏‡∂≠‡∑ä AI ‡∑É‡∑Ñ‡∑è‡∂∫‡∂ö</p>

        <div id="platformBadge" class="platform-badge">
            <span id="platformIcon">üíª</span>
            <span id="platformName">Loading...</span>
        </div>

        <div class="features">
            <div class="feature">
                <span class="feature-icon">‚ö°</span>
                <span>Offline ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑Ä‡∑ì‡∂∏</span>
            </div>
            <div class="feature">
                <span class="feature-icon">üöÄ</span>
                <span>‡∑Ä‡∑ö‡∂ú‡∑Ä‡∂≠‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ö‡∑Å‡∂∫</span>
            </div>
            <div class="feature">
                <span class="feature-icon">üíæ</span>
                <span>‡∂ö‡∑î‡∂©‡∑è storage ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫</span>
            </div>
            <div class="feature">
                <span class="feature-icon">‚úÖ</span>
                <span>‡∑É‡∑í‡∂∫‡∂Ω‡∑î devices ‡∑Ä‡∂Ω‡∂ß ‡∑É‡∑Ñ‡∑è‡∂∫</span>
            </div>
        </div>

        <div class="btn-group">
            <!-- Main Install Button - Always visible -->
            <button id="installBtn" class="install-btn">
                <span>üì±</span>
                <span id="installBtnText">App ‡∂ë‡∂ö Install ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>
            </button>

            <!-- iOS Instructions Button -->
            <button id="iosBtn" class="ios-btn hidden">
                <span>üçé</span>
                <span>iOS Install ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä</span>
            </button>
            
            <!-- Open in Browser Button -->
            <button id="openBtn" class="open-btn">
                <span>üåê</span>
                <span>Browser ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</span>
            </button>
        </div>

        <div id="iosInstructions" class="ios-instructions hidden">
            <strong>üçé iOS ‡∑É‡∂≥‡∑Ñ‡∑è Install ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏:</strong>
            <ol>
                <li>‡∂¥‡∑Ñ‡∑Ö "<strong>Browser ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∑Ä‡∑í‡∑Ä‡∑ò‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</strong>" ‡∂î‡∂∂‡∂±‡∑ä‡∂±</li>
                <li>Safari browser ‡∂ë‡∂ö‡∑ö ‡∂¥‡∑Ñ‡∑Ö <strong>Share (‚éò)</strong> icon ‡∂ë‡∂ö ‡∂≠‡∑ú‡∂ª‡∂±‡∑ä‡∂±</li>
                <li>"<strong>Add to Home Screen</strong>" ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±</li>
                <li>"<strong>Add</strong>" button ‡∂ë‡∂ö ‡∂î‡∂∂‡∂±‡∑ä‡∂±</li>
            </ol>
            <p style="margin-top:14px; padding-top:14px; border-top: 1px solid rgba(255,255,255,0.1);">
                <strong>‚ö†Ô∏è ‡∑É‡∂ß‡∑Ñ‡∂±:</strong> iOS ‡∑Ä‡∂Ω PWA install ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö‡∑ä‡∂ö‡∑ö Safari browser ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂¥‡∂∏‡∂´‡∂∫‡∑í.
            </p>
        </div>

        <div id="status" class="status hidden"></div>
    </div>

    <script>
        const APP_URL = 'https://www.spmods.download/Test/ai.html';
        let deferredPrompt = null;

        const installBtn = document.getElementById('installBtn');
        const installBtnText = document.getElementById('installBtnText');
        const iosBtn = document.getElementById('iosBtn');
        const openBtn = document.getElementById('openBtn');
        const status = document.getElementById('status');
        const iosInstructions = document.getElementById('iosInstructions');
        const platformName = document.getElementById('platformName');
        const platformIcon = document.getElementById('platformIcon');

        function detectPlatform() {
            const ua = navigator.userAgent.toLowerCase();
            const isIOS = /iphone|ipad|ipod/.test(ua);
            const isAndroid = /android/.test(ua);
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

            let platform = 'Desktop';
            let icon = 'üíª';

            if (isStandalone) {
                platform = 'Installed ‚úì';
                icon = '‚úÖ';
            } else if (isIOS) {
                platform = 'iOS';
                icon = 'üçé';
                iosBtn.classList.remove('hidden');
            } else if (isAndroid) {
                platform = 'Android';
                icon = 'ü§ñ';
            } else if (ua.includes('mac')) {
                platform = 'macOS';
            } else if (ua.includes('windows')) {
                platform = 'Windows';
                icon = 'ü™ü';
            } else if (ua.includes('linux')) {
                platform = 'Linux';
                icon = 'üêß';
            }

            platformName.textContent = platform;
            platformIcon.textContent = icon;
            return { isIOS, isAndroid, isStandalone };
        }

        const platform = detectPlatform();

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    await navigator.serviceWorker.register('sw.js');
                    console.log('‚úÖ Service Worker registered');
                } catch (error) {
                    console.error('‚ùå SW registration failed:', error);
                }
            });
        }

        // Capture install prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('‚úÖ Install prompt captured!');
            installBtn.classList.add('pulse');
            installBtnText.textContent = 'App ‡∂ë‡∂ö Install ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (PWA)';
            showStatus('‚ú® Install ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∑É‡∑ñ‡∂Ø‡∑è‡∂±‡∂∏‡∑ä!', 'success');
        });

        // MAIN INSTALL BUTTON CLICK
        installBtn.addEventListener('click', async () => {
            console.log('Install button clicked');
            console.log('Platform:', platform);
            console.log('Deferred prompt:', deferredPrompt);

            // iOS Detection
            if (platform.isIOS) {
                iosInstructions.classList.remove('hidden');
                iosInstructions.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                showStatus('üçé iOS ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂¥‡∑Ñ‡∂≠ ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂Ö‡∂±‡∑î‡∂ú‡∂∏‡∂±‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±', 'info');
                return;
            }

            // Already installed
            if (platform.isStandalone) {
                showStatus('‚úÖ App ‡∂ë‡∂ö ‡∂Ø‡∑ê‡∂±‡∂ß‡∂∏‡∂≠‡∑ä install ‡∂ö‡∂ª ‡∂á‡∂≠!', 'success');
                setTimeout(() => window.location.href = APP_URL, 1500);
                return;
            }

            // PWA Install (Android, Desktop Chrome/Edge)
            if (deferredPrompt) {
                installBtn.disabled = true;
                installBtn.classList.remove('pulse');
                installBtnText.textContent = 'Installing...';

                try {
                    await deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;

                    if (outcome === 'accepted') {
                        showStatus('üéâ App ‡∂ë‡∂ö install ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...', 'success');
                        installBtnText.textContent = 'Installed! Opening...';
                        setTimeout(() => {
                            window.location.href = APP_URL;
                        }, 2000);
                    } else {
                        showStatus('‚ùå Install ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂Ö‡∑Ä‡∂Ω‡∂Ç‡∂ú‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì', 'warning');
                        installBtnText.textContent = 'App ‡∂ë‡∂ö Install ‡∂ö‡∂ª‡∂±‡∑ä‡∂±';
                        installBtn.disabled = false;
                    }
                } catch (error) {
                    console.error('Install error:', error);
                    showStatus('‚ùå Error: ' + error.message, 'error');
                    installBtnText.textContent = 'App ‡∂ë‡∂ö Install ‡∂ö‡∂ª‡∂±‡∑ä‡∂±';
                    installBtn.disabled = false;
                }

                deferredPrompt = null;
            } else {
                // No install prompt available
                showStatus('‚ö†Ô∏è PWA install ‡∑É‡∂≥‡∑Ñ‡∑è Chrome ‡∑Ñ‡∑ù Edge browser ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±', 'warning');
            }
        });

        // iOS Instructions Toggle
        iosBtn.addEventListener('click', () => {
            iosInstructions.classList.toggle('hidden');
            if (!iosInstructions.classList.contains('hidden')) {
                iosInstructions.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        // Open in Browser Only
        openBtn.addEventListener('click', () => {
            window.location.href = APP_URL;
        });

        // App Installed Event
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA installed successfully!');
            showStatus('üéâ App ‡∂ë‡∂ö ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä install ‡∑Ä‡∑í‡∂∫!', 'success');
            installBtnText.textContent = 'Installed ‚úì';
            installBtn.disabled = true;
            
            setTimeout(() => {
                window.location.href = APP_URL;
            }, 2000);
        });

        // Show Status Message
        function showStatus(message, type = 'info') {
            status.textContent = message;
            status.className = `status ${type}`;
            status.classList.remove('hidden');
            
            setTimeout(() => {
                status.classList.add('hidden');
            }, 6000);
        }

        // Initial Status Check
        if (platform.isStandalone) {
            showStatus('‚úÖ App ‡∂ë‡∂ö ‡∂Ø‡∑ê‡∂±‡∂ß‡∂∏‡∂≠‡∑ä install ‡∂ö‡∂ª ‡∂á‡∂≠!', 'success');
            installBtnText.textContent = 'Installed - Open App';
        } else if (platform.isIOS) {
            showStatus('üçé iOS: ‡∂¥‡∑Ñ‡∂≠ install ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±', 'info');
            installBtnText.textContent = 'iOS Install ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±';
        } else {
            // Wait for beforeinstallprompt
            setTimeout(() => {
                if (!deferredPrompt) {
                    showStatus('üí° Chrome/Edge browser ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂± install ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß', 'info');
                }
            }, 3000);
        }
    </script>
</body>
</html>
